Evenemangskalendern Allom

Kalendern för Rails 3

git push #github
git push heroku master





#Att göra vid uppstart


bundle update
rake db:migrate


. ../secrets.sh    # sourca credentials till Amazon S3 i env variables (vill inte ha dem i kodträdet)
bundle exec rake sunspot:solr:start # or sunspot:solr:run to start in foreground         
# Starta sökmotorn på windows. 
rake sunspot:reindex          # Indexera om
rake import:municipalities    # Importera kommuner med data från csv-fil. Källa: SCB. Manuellt redigerad för korrekta namn för de kommuner som heter "stad" och för korrekta gentiv-s.

heroku db:push             # Kanske... ladda exempeldata från lokalt till Heroku (pull åt andra hållet)
rake scrape:municipalities    # Hämta url:er från Wikipedia till faktasida per kommun
rake scrape:update_facts      # Hämta faktaruta per kommun

# Lägg in en första användare b.r.stefan.pettersson@gmail.com
rake setup:first_admin        # b.r.stefan.pettersson@gmail.com

rake paperclip:refresh:thumbnails CLASS=Event
rake paperclip:refresh:thumbnails CLASS=Organizer


Use heroku db:pull when you wish to export the contents of your Heroku app’s database. Some uses include backups, local debugging, or to move the app’s deployment location. Kom ihåg reindex av solr!

För att populera stage-databasen
heroku pgbackups:restore DATABASE `heroku pgbackups:url --app allom-prod2` --app allom-stage
heroku run rake sunspot:solr:reindex --app allom-stage

ENV['ALLOM_LIVE'] skall ha värde för att inte kräva lösenord u: smygtitt
ENV['ALLOM_DEMO'] gör demoläge (readonly)